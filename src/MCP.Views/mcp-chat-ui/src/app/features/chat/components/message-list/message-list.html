<div class="message-list-container">
  @if (messages().length === 0) {
    <div class="empty-state">
      <mat-icon class="empty-icon">chat_bubble_outline</mat-icon>
      <h3>Start a conversation</h3>
      <p>Type a message below to begin chatting with the AI assistant.</p>
    </div>
  } @else {
    <div class="messages">
      @for (message of messages(); track $index) {
        <div class="message-wrapper"
             [class.user-message]="message.role === 'user'"
             [class.assistant-message]="message.role === 'assistant'">
          <mat-card class="message-card" [class.error-message]="isErrorMessage(message)">
            <mat-card-content>
              <div class="message-header">
                <span class="message-author">
                  {{ message.role === 'user' ? 'You' : 'AI Assistant' }}
                </span>
                <span class="message-time">
                  {{ getMessageTime(message) | date:'short' }}
                </span>
              </div>

              <div class="message-content">
                {{ getDisplayContent(message) }}
                @if (message.role !== 'user' && isLoading()) {
                  <mat-spinner diameter="16" class="streaming-indicator"></mat-spinner>
                }
              </div>
            </mat-card-content>
          </mat-card>
        </div>
      }
    </div>
  }
</div>
