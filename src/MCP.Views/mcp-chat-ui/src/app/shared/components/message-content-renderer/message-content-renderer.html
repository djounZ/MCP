<div class="message-content-renderer">
  @if (showSpinner() && message().role !== 'user') {
  <mat-spinner diameter="20"></mat-spinner>
  }

  <!-- Render combined text content with copy functionality -->
  @if (combinedTextContent()) {
  <app-message-text-content
    [content]="combinedTextContent()!"
    [searchQuery]="searchQuery()"
  >
  </app-message-text-content>
  }

  <!-- Render non-text content separately -->
  @for (content of nonTextContent(); track content) { @if
  (isContentType(content, 'error')) {
  <app-message-error-content
    [content]="asErrorContent(content)"
    [searchQuery]="searchQuery()"
  >
  </app-message-error-content>
  } @else {
  <div class="unknown-content-type">
    Unknown content type: {{ content.$type }}
  </div>
  } }
</div>
